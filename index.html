<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>God With Us: He Comes Close and Changes Everything</title>

<style>
:root{
  --bg:#ffffff;
  --card:#ffffff;
  --line:#d0d0d0;
  --text:#000000;
  --muted:#444444;
}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.wrap{
  max-width:940px;
  margin:0 auto;
  padding:20px;
}
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:18px;
  margin-bottom:18px;
}
h1{font-size:28px;margin:0 0 8px}
h2{font-size:21px;margin:0 0 10px}
.muted{color:var(--muted);font-size:17px;line-height:1.5}
.scripture{font-size:17px;color:var(--muted)}
label{
  display:block;
  margin:14px 0 6px;
  font-size:17px;
  font-weight:600;
}
input,textarea{
  width:100%;
  box-sizing:border-box;
  border-radius:10px;
  border:1px solid var(--line);
  padding:14px;
  font-size:20px;
}
textarea{min-height:160px;resize:vertical}
.q{padding-left:20px;font-size:17px;line-height:1.6}
.q li{margin:6px 0}
.btn{
  width:100%;
  border-radius:10px;
  border:1px solid #000;
  background:#000;
  color:#fff;
  padding:16px;
  font-size:22px;
  font-weight:700;
  cursor:pointer;
}
.btn:hover{background:#222}
.status{font-size:15px;color:#555;margin-top:6px}
.divider{height:1px;background:var(--line);margin:16px 0}
.smallhelp{font-size:15px;color:#555;margin-top:8px;line-height:1.4}
</style>
</head>

<body>
<div class="wrap">

<!-- HEADER (NO EMAIL BOX HERE ANYMORE) -->
<div class="card">
  <h1>God With Us: He Comes Close and Changes Everything</h1>
  <div class="scripture"><b>Scripture:</b> Luke 1:46–55; Matthew 1:18–23</div>
  <div class="status" id="status">Saved</div>
  <div class="divider"></div>

  <label for="date">Date</label>
  <input id="date" placeholder="December 21, 2025">
  <div class="smallhelp">Date fills in automatically. You can change it.</div>
</div>

<!-- OPENING -->
<div class="card">
  <h2>Opening Reflection</h2>
  <div class="muted">
    God does not stay distant.<br>
    God steps into ordinary lives, unexpected places, and complicated stories.<br>
    When God comes close, nothing stays the same.
  </div>
  <label for="opening_prompt">Where do you most need God to come close right now?</label>
  <textarea id="opening_prompt"></textarea>
  <label for="opening_notes">Notes</label>
  <textarea id="opening_notes"></textarea>
</div>

<!-- MARY -->
<div class="card">
  <h2>Mary’s Song: God Turns the World Right-Side Up (Luke 1:46–55)</h2>
  <div class="muted">
    Mary’s joy is not based on comfort or certainty.<br>
    It rises from trust—trust that God sees the lowly, fills the hungry, and disrupts unjust systems.<br>
    Joy is not denial of reality; it is confidence that God is at work within it.
  </div>
  <label>Reflection Questions</label>
  <ul class="q">
    <li>What does Mary rejoice over that hasn’t fully happened yet?</li>
    <li>Where do you see God lifting the lowly or filling the hungry today?</li>
    <li>How does joy look different when it’s rooted in trust rather than circumstances?</li>
  </ul>
  <label for="mary_notes">Notes</label>
  <textarea id="mary_notes"></textarea>
</div>

<!-- JOY -->
<div class="card">
  <h2>When God Comes Close, Joy Rises in Unlikely Places</h2>
  <div class="muted">
    God’s joy shows up in unexpected people and uncomfortable moments.<br>
    Joy is born not from ease, but from God’s nearness.<br>
    Even in fear, uncertainty, or disruption, God’s presence awakens hope.
  </div>
  <label>Reflection Questions</label>
  <ul class="q">
    <li>Where have you experienced joy in a season you didn’t expect it?</li>
    <li>What unlikely place in your life might God be working right now?</li>
    <li>How does God’s closeness change how you view your current struggles?</li>
  </ul>
  <label for="joy_notes">Notes</label>
  <textarea id="joy_notes"></textarea>
</div>

<!-- LOVE -->
<div class="card">
  <h2>When God Comes Close, Love Turns the World Around (Matthew 1:18–23)</h2>
  <div class="muted">
    Joseph’s story reminds us that love listens before it reacts.<br>
    God’s love doesn’t shame—it restores, protects, and stays.<br>
    Emmanuel means God enters our mess, not to condemn, but to redeem.
  </div>
  <label>Reflection Questions</label>
  <ul class="q">
    <li>What risks did Joseph take because he trusted God?</li>
    <li>Where might God be inviting you to respond with grace instead of fear?</li>
    <li>How does “God with us” reshape how we treat others?</li>
  </ul>
  <label for="love_notes">Notes</label>
  <textarea id="love_notes"></textarea>
</div>

<!-- LIVING -->
<div class="card">
  <h2>Living the Truth: God With Us</h2>
  <div class="muted">
    God does not wait for us to get everything right.<br>
    God comes close—and in that closeness, joy rises and love reshapes the world.
  </div>
  <label>This Week’s Invitation</label>
  <ul class="q">
    <li>Watch for where God is already near.</li>
    <li>Choose joy rooted in trust.</li>
    <li>Let love guide your response—even when it costs something.</li>
  </ul>
  <label for="commitment">Personal Commitment: What is one way you will live differently because God is with you?</label>
  <textarea id="commitment"></textarea>
  <label for="final_notes">Notes</label>
  <textarea id="final_notes"></textarea>
</div>

<!-- EMAIL AT BOTTOM (EMAIL BOX + BUTTON) -->
<div class="card">
  <label for="email">Email my notes to</label>
  <input id="email" type="email" placeholder="you@example.com">

  <div style="margin-top:14px">
    <button class="btn" onclick="emailNotes()">Email My Notes</button>
  </div>

  <div class="smallhelp">
    This opens your email app with your notes filled in. Then you press Send.
  </div>
</div>

</div>

<script>
const KEY = "vumc_god_with_us_white_bottom_email_v2";
const statusEl = document.getElementById("status");

// Text areas (content to check for empty submission)
const noteIds = [
  "opening_prompt","opening_notes","mary_notes",
  "joy_notes","love_notes","commitment","final_notes"
];

// All fields to save
const saveIds = ["date","email", ...noteIds];

let timer;

function setStatus(t){ statusEl.textContent = t; }

function formatToday() {
  // Example: December 17, 2025
  const d = new Date();
  return d.toLocaleDateString(undefined, { year:"numeric", month:"long", day:"numeric" });
}

function getData(){
  const d = {};
  saveIds.forEach(id => d[id] = document.getElementById(id).value || "");
  d.title = "God With Us: He Comes Close and Changes Everything";
  d.scripture = "Luke 1:46–55; Matthew 1:18–23";
  return d;
}

function saveNow(){
  localStorage.setItem(KEY, JSON.stringify(getData()));
  setStatus("Saved");
}

function scheduleSave(){
  setStatus("Saving…");
  clearTimeout(timer);
  timer = setTimeout(saveNow, 300);
}

function load(){
  const raw = localStorage.getItem(KEY);
  if(raw){
    try{
      const d = JSON.parse(raw);
      saveIds.forEach(id => {
        if(d[id] !== undefined) document.getElementById(id).value = d[id];
      });
      setStatus("Loaded");
      setTimeout(()=>setStatus("Saved"), 800);
    }catch(e){}
  }

  // Auto-fill date ONLY if date field is empty after load
  const dateEl = document.getElementById("date");
  if(!dateEl.value.trim()){
    dateEl.value = formatToday();
  }
}

function hasAnyNotes(){
  return noteIds.some(id => (document.getElementById(id).value || "").trim().length > 0);
}

function emailNotes(){
  saveNow();

  if(!hasAnyNotes()){
    alert("Please write at least one note before emailing.");
    return;
  }

  const email = document.getElementById("email").value.trim();
  if(!email){
    alert("Please enter your email address.");
    return;
  }

  const d = getData();
  const subject = d.title + (d.date ? (" (" + d.date + ")") : "");

  const body =
`${d.title}
Scripture: ${d.scripture}
Date: ${d.date}

OPENING REFLECTION
Where do you most need God to come close right now?
${d.opening_prompt}

Notes:
${d.opening_notes}

MARY’S SONG: GOD TURNS THE WORLD RIGHT-SIDE UP (Luke 1:46–55)
Notes:
${d.mary_notes}

WHEN GOD COMES CLOSE, JOY RISES IN UNLIKELY PLACES
Notes:
${d.joy_notes}

WHEN GOD COMES CLOSE, LOVE TURNS THE WORLD AROUND (Matthew 1:18–23)
Notes:
${d.love_notes}

LIVING THE TRUTH: GOD WITH US
Personal Commitment:
${d.commitment}

Notes:
${d.final_notes}
`;

  window.location.href =
    "mailto:" + encodeURIComponent(email) +
    "?subject=" + encodeURIComponent(subject) +
    "&body=" + encodeURIComponent(body);
}

// Autosave on input
saveIds.forEach(id => {
  document.getElementById(id).addEventListener("input", scheduleSave);
});

load();
</script>

</body>
</html>
