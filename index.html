<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GOD WITH US: NOW WHAT? — Interactive Sermon Notes</title>
  <meta name="description" content="Interactive sermon notes with local autosave and email-to-self." />

  <style>
    :root{
      --bg:#ffffff;
      --text:#111111;
      --muted:#444444;
      --border:#e6e6e6;
      --shadow:0 10px 25px rgba(0,0,0,.06);
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.4;
    }
    .wrap{
      max-width:860px;
      margin:0 auto;
      padding:18px 14px 34px;
    }
    .header{
      background:#fff;
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px 16px 12px;
      margin-bottom:14px;
    }
    h1{margin:0 0 8px;font-size:22px;letter-spacing:.2px}
    .meta{
      display:flex;gap:10px;flex-wrap:wrap;
      color:var(--muted);font-size:14px;
    }
    .pill{
      border:1px solid var(--border);
      border-radius:999px;
      padding:6px 10px;
      background:#fff;
    }
    .card{
      background:#fff;
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
      margin-bottom:14px;
    }
    .card h2{margin:0 0 8px;font-size:18px}
    .lead{margin:0 0 10px;color:var(--muted);font-size:15px}
    .q{margin:10px 0 6px;font-weight:700}
    .small{font-size:13px;color:var(--muted)}
    textarea{
      width:100%;
      min-height:92px;
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px;
      font-size:15px;
      resize:vertical;
      background:#fff;
      color:var(--text);
    }
    input[type="email"], input[type="text"]{
      width:100%;
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px;
      font-size:15px;
      background:#fff;
      color:var(--text);
    }
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row > div{flex:1 1 240px}
    .btnbar{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{
      border:1px solid var(--border);
      background:#fff;
      border-radius:12px;
      padding:10px 12px;
      font-size:15px;
      cursor:pointer;
    }
    button.primary{background:#111;border-color:#111;color:#fff}
    .status{margin-top:10px;font-size:14px;color:var(--muted)}
    hr{border:0;border-top:1px solid var(--border);margin:12px 0}
  </style>
</head>

<body>
  <div class="wrap">

    <div class="header">
      <h1 id="title">GOD WITH US: NOW WHAT?</h1>
      <div class="meta">
        <div class="pill"><strong>Date:</strong> <span id="dateText"></span></div>
        <div class="pill"><strong>Scripture:</strong> Luke 2:25–35</div>
      </div>
    </div>

    <div class="card">
      <h2>Opening Reflection</h2>
      <p class="lead">
        Christmas proclaims that <strong>God is with us</strong>. But when the celebrations fade, a quieter question remains:
        <strong>Now what?</strong> Simeon shows us what faithful living looks like after the promise is fulfilled.
      </p>

      <div class="q">Reflection Question</div>
      <div class="small">What emotions do you usually feel once Christmas is over?</div>
      <textarea id="notes_opening" placeholder="Type your notes here..."></textarea>
    </div>

    <div class="card">
      <h2>When we receive Jesus, our waiting turns into worship</h2>
      <p class="lead">
        Simeon waited with hope—not control. When he finally holds Jesus, he worships.
        Receiving Jesus transforms waiting from frustration into faith.
      </p>

      <div class="q">Questions</div>

      <div class="small">1) Where in your life are you still waiting on God?</div>
      <textarea id="notes_p1_q1" placeholder="Notes..."></textarea>

      <div class="small" style="margin-top:8px;">2) Has your waiting drawn you closer to God—or pushed you toward discouragement?</div>
      <textarea id="notes_p1_q2" placeholder="Notes..."></textarea>

      <div class="q">Personal Reflection</div>
      <div class="small">Waiting doesn’t always end when Jesus arrives—it changes. Trust replaces tension.</div>
      <textarea id="notes_p1_ref" placeholder="Notes..."></textarea>
    </div>

    <div class="card">
      <h2>When we receive Jesus, our lives are refocused</h2>
      <p class="lead">
        Simeon’s words are honest: Jesus doesn’t simply comfort—He reorients.
        Receiving Jesus reshapes our priorities, decisions, and direction.
      </p>

      <div class="q">Questions</div>

      <div class="small">1) What currently holds the most focus in your life?</div>
      <textarea id="notes_p2_q1" placeholder="Notes..."></textarea>

      <div class="small" style="margin-top:8px;">2) In what areas might Jesus be calling you to realign your priorities?</div>
      <textarea id="notes_p2_q2" placeholder="Notes..."></textarea>

      <div class="q">Personal Reflection</div>
      <div class="small">Jesus is not an addition to our lives—He becomes the center.</div>
      <textarea id="notes_p2_ref" placeholder="Notes..."></textarea>
    </div>

    <div class="card">
      <h2>Closing Reflection</h2>
      <p class="lead">
        God is with us—not just at Christmas, but in every ordinary moment that follows.
        We worship. We refocus. We live differently.
      </p>

      <div class="q">Final Reflection Question</div>
      <div class="small">What is one intentional step you can take this week to live as someone who has truly received Jesus?</div>
      <textarea id="notes_final" placeholder="Notes..."></textarea>
    </div>

    <!-- EMAIL + ACTIONS AT BOTTOM -->
    <div class="card" id="emailCard">
      <h2>Email My Notes</h2>
      <p class="lead">
        Your notes auto-save on this device. Tapping “Email Notes” opens your email app with your notes filled in.
      </p>

      <div class="row">
        <div>
          <div class="small">Sermon Date</div>
          <input id="sermonDateInput" type="text" />
        </div>
        <div>
          <div class="small">Send to Email</div>
          <input id="emailTo" type="email" placeholder="you@example.com" />
        </div>
      </div>

      <div class="btnbar">
        <button class="primary" id="emailBtn">Email Notes</button>
        <button id="copyBtn">Copy Notes</button>
        <button id="clearBtn">Clear Notes</button>
      </div>

      <div class="status" id="status"></div>
      <hr />
      <div class="small">
        Note: If you don’t have a mail app set up on your device, use “Copy Notes” and paste them into an email or notes app.
      </div>
    </div>

  </div>

<script>
  // -----------------------
  // GitHub Pages version
  // -----------------------
  const STORAGE_KEY = "vumc_notes_god_with_us_now_what_lk2_25_35";

  // Set sermon date here (or leave blank to auto-use today's date)
  const FIXED_SERMON_DATE = "December 28, 2025";

  const fields = [
    "notes_opening",
    "notes_p1_q1","notes_p1_q2","notes_p1_ref",
    "notes_p2_q1","notes_p2_q2","notes_p2_ref",
    "notes_final"
  ];

  const $ = (id) => document.getElementById(id);

  function niceToday() {
    const d = new Date();
    return d.toLocaleDateString(undefined, { year:"numeric", month:"long", day:"numeric" });
  }

  function setStatus(msg){ $("status").textContent = msg || ""; }

  function getSermonDate() {
    const v = $("sermonDateInput").value.trim();
    return v || (FIXED_SERMON_DATE || niceToday());
  }

  function saveNow(){
    const data = {};
    fields.forEach(id => data[id] = $(id).value || "");
    data.emailTo = $("emailTo").value || "";
    data.sermonDate = $("sermonDateInput").value || "";
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  function loadSaved(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return;
      const data = JSON.parse(raw);
      fields.forEach(id => { if(data[id] != null) $(id).value = data[id]; });
      if(data.emailTo) $("emailTo").value = data.emailTo;
      if(data.sermonDate) $("sermonDateInput").value = data.sermonDate;
    }catch(e){}
  }

  function buildPlainText(){
    const title = $("title").textContent.trim();
    const date = getSermonDate();

    const sections = [
      ["Opening Reflection – Question", $("notes_opening").value],
      ["Point 1 – Q1 (Where are you waiting on God?)", $("notes_p1_q1").value],
      ["Point 1 – Q2 (Closer to God or discouraged?)", $("notes_p1_q2").value],
      ["Point 1 – Personal Reflection", $("notes_p1_ref").value],
      ["Point 2 – Q1 (What has your focus?)", $("notes_p2_q1").value],
      ["Point 2 – Q2 (Where to realign?)", $("notes_p2_q2").value],
      ["Point 2 – Personal Reflection", $("notes_p2_ref").value],
      ["Closing – Final Reflection Question", $("notes_final").value]
    ];

    let out = `${title}\nDate: ${date}\nScripture: Luke 2:25–35\n\n`;
    sections.forEach(([label, val]) => {
      out += `${label}\n${(val || "").trim() || "(no notes)"}\n\n`;
    });
    return out.trim();
  }

  function mailtoEmail(){
    const to = $("emailTo").value.trim();
    if(!to){
      setStatus("Please enter your email address.");
      return;
    }
    const date = getSermonDate();
    const subject = `Sermon Notes — GOD WITH US: NOW WHAT? — ${date}`;
    const body = buildPlainText();

    saveNow();
    setStatus("Opening your email app...");

    const url = `mailto:${encodeURIComponent(to)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = url;
  }

  function copyNotes(){
    const text = buildPlainText();
    navigator.clipboard.writeText(text).then(() => {
      setStatus("✅ Copied to clipboard.");
    }).catch(() => {
      setStatus("Copy failed — please manually select and copy.");
    });
  }

  function clearNotes(){
    if(!confirm("Clear all notes?")) return;
    fields.forEach(id => $(id).value = "");
    saveNow();
    setStatus("Notes cleared.");
  }

  (function init(){
    const initialDate = FIXED_SERMON_DATE || niceToday();
    $("dateText").textContent = initialDate;
    $("sermonDateInput").value = FIXED_SERMON_DATE || "";

    loadSaved();

    // Keep header date in sync with input if user edits it
    $("sermonDateInput").addEventListener("input", () => {
      $("dateText").textContent = getSermonDate();
      saveNow();
    });

    // Auto-save
    fields.forEach(id => $(id).addEventListener("input", saveNow));
    $("emailTo").addEventListener("input", saveNow);

    // Buttons
    $("emailBtn").addEventListener("click", mailtoEmail);
    $("copyBtn").addEventListener("click", copyNotes);
    $("clearBtn").addEventListener("click", clearNotes);

    setStatus("");
  })();
</script>
</body>
</html>
